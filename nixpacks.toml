[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "echo 'Installing backend dependencies...'",
  "npm install --production --prefix backend",
  "echo 'Backend dependencies installed'",
  "echo 'Installing frontend dependencies...'",
  "npm install --prefix frontend",
  "echo 'Frontend dependencies installed'"
]

[phases.build]
cmds = [
  "chmod +x railway-build.sh",
  "./railway-build.sh"
]

[start]
cmd = "echo 'Starting backend server...' && npm start --prefix backend"